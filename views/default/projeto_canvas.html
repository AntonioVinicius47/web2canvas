{{extend 'default/layout_base.html'}}
{{ include 'default/modals_ajuda.html'}}

<div class="container">
{{ if request.function == "projeto_canvas": }}
  <h1>
    {{=projeto.nome}}
    <small>- criado por: {{=projeto.criado_por.nome}}</small>
    <small> - {{=projeto.criado_em.strftime("%d/%m/%Y")}}</small>
  </h1>
{{ pass }}

  <div class="content-container">
    <!-- mensagem de retorno da chamada ajax -->
    <div id="target_ajax"></div>
    <div id="content_area">
      <div id="canvas">
        <table class="canvas" style="height: 368px; font-size: 11.833333333333334px;"> <!-- tabela principal -->
          <tbody>
            <tr>
              <td id="container_parcerias_p" class="area sessao_como" height="66%" id="problem" rowspan="2" width="20%">
                <table class="cell-container"> <!-- tabela secundaria  -->
                  <tbody>
                    <div class="row-fluid titulo_bloco">
                      <h3 class="main">
                        <div id="img_parcerias_p" class="area-title">Parcerias<br>Principais</div>
                        <hr>
                      </h3>
                    </div>
                    <div class="row-fluid botoes_bloco">
                      <button class="parcerias_principais adicionar_item btn btn-success btn-mini pull-left">
                        Adicionar
                      </button>
                      <!-- link modal -->
                      <a href="#parcerias_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                        <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                      </a>
                    </div>
                    <div class="row-fluid cartoes">
                      <div class="parcerias_principais itens drag_drop">
                        <!-- gero os itens dinamicamente -->
                        {{import json}}
                        {{ if projeto.parcerias_principais: }}
                            {{ for i in sorted(json.loads(projeto.parcerias_principais)): }}
                            <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="parcerias_principais" data-pk="{{=i}}" data-placement="right">{{=json.loads(projeto.parcerias_principais)[i]}}</a></p>
                            {{ pass }}
                        {{ pass }}
                      </div>
                    </div>
                  </tbody>
                </table> <!-- fim da tabela secundaria  -->
              </td>
              <td id="container_atividades_p" class="area sessao_como" height="33%" id="solution" width="20%">
                <table class="cell-container"> <!-- tabela secundaria  -->
                  <tbody>
                    <div class="row-fluid titulo_bloco">
                      <h3 class="main">
                        <div id="img_atividades_p" class="area-title">Atividades<br>Principais</div>
                        <hr>
                      </h3>
                    </div>
                    <div class="row-fluid botoes_bloco">
                      <button class="atividades_principais adicionar_item btn btn-success btn-mini pull-left">
                        Adicionar
                      </button>
                      <!-- link modal -->
                      <a href="#atividades_p_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                        <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                      </a>
                    </div>
                    <div class="row-fluid cartoes">
                      <div class="atividades_principais itens drag_drop">
                        <!-- gero os itens dinamicamente -->
                        {{import json}}
                        {{ if projeto.atividades_principais: }}
                            {{ for i in sorted(json.loads(projeto.atividades_principais)): }}
                            <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="atividades_principais" data-pk="{{=i}}">{{=json.loads(projeto.atividades_principais)[i]}}</a></p>
                            {{ pass }}
                        {{ pass }}
                      </div>
                    </div>
                  </tbody>
                </table> <!-- fim da tabela secundaria  -->
              </td>
              <td id="container_proposta_v" class="area sessao_oque" colspan="2" height="66%" id="value_proposition" rowspan="2" width="20%">
                <table class="cell-container"> <!-- tabela secundaria  -->
                  <tbody>
                    <div class="row-fluid titulo_bloco">
                      <h3 class="main">
                        <div id="img_proposta_v" class="area-title">Proposta<br>de valor</div>
                        <hr>
                      </h3>
                    </div>
                    <div class="row-fluid botoes_bloco">
                      <button class="proposta_valor adicionar_item btn btn-success btn-mini pull-left">
                        Adicionar
                      </button>
                      <!-- link modal -->
                      <a href="#proposta_valor_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                        <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                      </a>
                    </div>
                    <div class="row-fluid cartoes">
                      <div class="proposta_valor itens drag_drop">
                        <!-- gero os itens dinamicamente -->
                        {{import json}}
                        {{ if projeto.proposta_valor: }}
                            {{ for i in sorted(json.loads(projeto.proposta_valor)): }}
                            <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="proposta_valor" data-pk="{{=i}}">{{=json.loads(projeto.proposta_valor)[i]}}</a></p>
                            {{ pass }}
                        {{ pass }}
                      </div>
                    </div>
                  </tbody>
                </table> <!-- fim da tabela secundaria  -->
              </td>
              <td id="container_relacionamento_c" class="area sessao_parquem" height="33%" id="unfair_advantage" width="20%">
                <table class="cell-container"> <!-- tabela secundaria  -->
                  <tbody>
                    <div class="row-fluid titulo_bloco">
                      <h3 class="main">
                        <div id="img_relacionamento_c" class="area-title">Relacionamento<br>com Clientes</div>
                        <hr>
                      </h3>
                    </div>
                    <div class="row-fluid botoes_bloco">
                      <button class="relacionamento_clientes adicionar_item btn btn-success btn-mini pull-left">
                        Adicionar
                      </button>
                      <!-- link modal -->
                      <a href="#relacionamento_clientes_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                        <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                      </a>
                    </div>
                    <div class="row-fluid cartoes">
                      <div class="relacionamento_clientes itens drag_drop">
                        <!-- gero os itens dinamicamente -->
                        {{import json}}
                        {{ if projeto.relacionamento_clientes: }}
                            {{ for i in sorted(json.loads(projeto.relacionamento_clientes)): }}
                            <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="relacionamento_clientes" data-pk="{{=i}}">{{=json.loads(projeto.relacionamento_clientes)[i]}}</a></p>
                            {{ pass }}
                        {{ pass }}
                      </div>
                    </div>
                  </tbody>
                </table> <!-- fim da tabela secundaria  -->
              </td>
              <td id="container_segmento_c" class="area sessao_parquem" height="66%" id="customer_segments" rowspan="2" width="20%">
                <table class="cell-container"> <!-- tabela secundaria  -->
                  <tbody>
                    <div class="row-fluid titulo_bloco">
                      <h3 class="main">
                        <div id="img_segmento_c" class="area-title">Segmento<br>de Clientes</div>
                        <hr>
                      </h3>
                    </div>
                    <div class="row-fluid botoes_bloco">
                      <button class="segmento_clientes adicionar_item btn btn-success btn-mini pull-left">
                        Adicionar
                      </button>
                      <!-- link modal -->
                      <a href="#segmento_clientes_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                        <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                      </a>
                    </div>
                    <div class="row-fluid cartoes">
                      <div class="segmento_clientes itens drag_drop">
                        <!-- gero os itens dinamicamente -->
                        {{import json}}
                        {{ if projeto.segmento_clientes: }}
                            {{ for i in sorted(json.loads(projeto.segmento_clientes)): }}
                            <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="segmento_clientes" data-pk="{{=i}}">{{=json.loads(projeto.segmento_clientes)[i]}}</a></p>
                            {{ pass }}
                        {{ pass }}
                      </div>
                    </div>
                  </tbody>
                </table> <!-- fim da tabela secundaria  -->
              </td>
            </tr>
            <tr>
            <td id="container_recursos_p" class="area sessao_como" height="33%" id="key_activity" width="20%">
              <table class="cell-container">
                <tbody>
                  <div class="row-fluid titulo_bloco">
                    <h3 class="main">
                      <div id="img_recursos_p" class="area-title">Recursos Principais</div>
                      <hr>
                    </h3>
                  </div>
                  <div class="row-fluid botoes_bloco">
                    <button class="recursos_principais adicionar_item btn btn-success btn-mini pull-left">
                      Adicionar
                    </button>
                    <!-- link modal -->
                    <a href="#recursos_principais_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                      <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                    </a>
                  </div>
                  <div class="row-fluid cartoes">
                    <div class="recursos_principais itens drag_drop">
                      <!-- gero os itens dinamicamente -->
                      {{import json}}
                      {{ if projeto.recursos_principais: }}
                          {{ for i in sorted(json.loads(projeto.recursos_principais)): }}
                          <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="recursos_principais" data-pk="{{=i}}">{{=json.loads(projeto.recursos_principais)[i]}}</a></p>
                          {{ pass }}
                      {{ pass }}
                    </div>
                  </div>
                </tbody>
              </table>
            </td>
            <td id="container_canais" class="area sessao_parquem" height="33%" id="channels" width="20%">
              <table class="cell-container">
                <tbody>
                  <div class="row-fluid titulo_bloco">
                    <h3 class="main">
                      <div id="img_canais" class="area-title">Canais</div>
                      <hr>
                    </h3>
                  </div>
                  <div class="row-fluid botoes_bloco">
                    <button class="canais adicionar_item btn btn-success btn-mini pull-left">
                      Adicionar
                    </button>
                    <!-- link modal -->
                    <a href="#canais_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                      <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                    </a>
                  </div>
                  <div class="row-fluid cartoes">
                    <div class="canais itens drag_drop">
                      <!-- gero os itens dinamicamente -->
                      {{import json}}
                      {{ if projeto.canais: }}
                          {{ for i in sorted(json.loads(projeto.canais)): }}
                          <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="canais" data-pk="{{=i}}">{{=json.loads(projeto.canais)[i]}}</a></p>
                          {{ pass }}
                      {{ pass }}
                    </div>
                  </div>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td id="container_estrutura_c" class="area sessao_quanto" colspan="3" height="33%" id="cost_structure" width="50%">
              <table class="cell-container">
                <tbody>
                  <div class="row-fluid titulo_bloco">
                    <h3 class="main">
                      <div id="img_estrutura_c" class="area-title">Estrutura<br>de Custos</div>
                      <hr>
                    </h3>
                  </div>
                  <div class="row-fluid botoes_bloco">
                    <button class="estrutura_custos adicionar_item btn btn-success btn-mini pull-left">
                      Adicionar
                    </button>
                    <!-- link modal -->
                    <a href="#estrutura_custos_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                      <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                    </a>
                  </div>
                  <div class="row-fluid cartoes">
                    <div class="estrutura_custos itens drag_drop">
                      <!-- gero os itens dinamicamente -->
                      {{import json}}
                      {{ if projeto.estrutura_custos: }}
                          {{ for i in sorted(json.loads(projeto.estrutura_custos)): }}
                          <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="estrutura_custos" data-pk="{{=i}}" data-placement="right">{{=json.loads(projeto.estrutura_custos)[i]}}</a></p>
                          {{ pass }}
                      {{ pass }}
                    </div>
                  </div>
                </tbody>
              </table>
            </td>
            <td id="container_receita" class="area sessao_quanto" colspan="3" height="33%" id="revenue_streams" width="50%">
              <table class="cell-container">
                <tbody>
                  <div class="row-fluid titulo_bloco">
                    <h3 class="main">
                      <div id="img_receita" class="area-title">Receitas<br><span>.</span></div>
                      <hr>
                    </h3>
                  </div>
                  <div class="row-fluid botoes_bloco">
                    <button class="receitas adicionar_item btn btn-success btn-mini pull-left">
                      Adicionar
                    </button>
                    <!-- link modal -->
                    <a href="#receitas_ajuda" class="ajuda pull-right" role="button" data-toggle="modal" class="helpIcon">
                      <img height="24" src='{{=URL("static","images/icon_help.png")}}' alt="Saiba Mais" title="Saiba Mais">
                    </a>
                  </div>
                  <div class="row-fluid cartoes">
                    <div class="receitas itens drag_drop">
                      <!-- gero os itens dinamicamente -->
                      {{import json}}
                      {{ if projeto.receitas: }}
                          {{ for i in sorted(json.loads(projeto.receitas)): }}
                          <p><img src='{{=URL("static","img/close.png")}}' class="deletar_cartao pull-right" /><a href="#" class="item_existente" id="receitas" data-pk="{{=i}}">{{=json.loads(projeto.receitas)[i]}}</a></p>
                          {{ pass }}
                      {{ pass }}
                    </div>
                  </div>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>
      </table> <!-- fim da tabela principal -->
        <div class="colaboradores-container">
          <div class="pull-left">
            <a href="#"><img alt="Team" height="64" src='{{=URL("static","img/time.png")}}'></a>
          </div>
          {{from random import randint}}
          <div class="pull-left">
            <ul class="colaboradores">
              <li>
                  <div class="person">
                    <div class="icon">
                      <img alt="{{=projeto.criado_por.nome}} avatar" title="{{=projeto.criado_por.nome}} avatar" src='{{=URL("static","img/avatar%d.png" % randint(1,4))}}'>
                    </div>
                    <div class="name">
                    {{=projeto.criado_por.nome}}
                    </div>
                  </div>
              </li>
              {{ for i in time_compartilhamento: }}
              <li>
                  <div class="person">
                    <div class="icon">
                      <img alt="{{=i.usuario_id.first_name}} avatar" title="{{=i.usuario_id.first_name}} avatar" src='{{=URL("static","img/avatar%d.png" % randint(1,4))}}'>
                    </div>
                    <div class="name">
                    {{=i.usuario_id.first_name}}
                    </div>
                  </div>
              </li>
              {{ pass }}
              {{ if projeto.criado_por == pessoa_logada:}}
                  <div class="input-prepend">
                  <span class="add-on">+</span>
                  <input type="text" name="usuario" id="autocomplete" placeholder="Usuário"/>
                  <a href="#" id="adicionar_usuario" class="btn btn-success">Add</a>
              {{ pass }}
              </div>
            </ul>
          </div> <!-- fim do pull-left -->
        </div> <!-- fim do colaboradores-container -->
      </div> <!-- fim do canvas -->
    </div> <!-- fim do content_area -->
  </div> <!-- fim do content-container -->
</div> <!-- fim do container -->
